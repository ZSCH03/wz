var lottery=(function(){var d;var j=false;var h=1;var g=2;var m=function(p,o){if(o){d=o}j=p;c(h,function(){if(!p){lottery.load();$(".floating").hide()}else{b(h)}})};var e=function(p,o){j=p;if(o){d=o}c(g,function(){if(!p){n()}else{b(g)}})};var f=function(){if($("#layer_lottery").length>0&&$("#layer_lottery").is(":visible")){return true}return false};var b=function(o){nyonline.jsonp("/lottery/getUserTimes.c",{},function(p){if(p.code==0||p.code==-11){if(o==h){lottery.load();$(".floating").hide()}if(o==g){n()}}},function(){alert("网络超时")})};var c=function(o,p){nyonline.jsonp("/lottery/hasCloseFloatWin.c",{floatid:o},function(q){if(q.code==0&&q.hasclosed){if(o==g){$(".floating").hide()}}else{if(p){p()}}},function(){alert("网络超时")})};var i=function(o,p){nyonline.jsonp("/lottery/closeFloatWin.c",{floatid:o},function(q){},function(){alert("网络超时")},function(){if(p){p()}})};var n=function(){if(!f()){$(".floating").show()}};var a=function(){$(".floating").hide();i(g,null)};var l=function(){layer.getLayer("",'<a class="Banner_close" id="1"></a>',"立即抽奖");$(".Banner_close").on("click",function(){lottery.saveCloseStatusInCookies($(this).attr("id"),null);$(".layer").hide();e(j,null);document.body.style.overflow=""})};var k=function(o){if(o==1){i("1",function(){window.location.href=d})}else{window.location.href=d}};return{init:m,saveCloseStatusInCookies:i,showFloat:n,closeFloat:a,initFloat:e,load:l,gotoLotteryPage:k}})();